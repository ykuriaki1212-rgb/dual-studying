<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ãƒ€ãƒ–ãƒ«å—é¨“ã‚¹ã‚¿ãƒ‡ã‚£ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ 2026</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        .header {
            background: white;
            border-radius: 12px;
            padding: 20px 30px;
            margin-bottom: 20px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 15px;
        }

        .header h1 {
            color: #1f2937;
            font-size: 24px;
            font-weight: 700;
        }

        .sync-status {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 14px;
            font-weight: 600;
        }

        .sync-status.syncing {
            background: #fef3c7;
            color: #92400e;
        }

        .sync-status.synced {
            background: #d1fae5;
            color: #065f46;
        }

        .sync-status.error {
            background: #fee2e2;
            color: #991b1b;
        }

        .sync-status.offline {
            background: #e5e7eb;
            color: #374151;
        }

        .status-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            animation: pulse 2s infinite;
        }

        .syncing .status-dot { background: #f59e0b; }
        .synced .status-dot { background: #10b981; }
        .error .status-dot { background: #ef4444; }
        .offline .status-dot { background: #6b7280; }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }

        .countdown-section {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
        }

        .countdown-card {
            background: white;
            border-radius: 12px;
            padding: 25px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }

        .countdown-card.sharoushi {
            border-left: 5px solid #2563eb;
        }

        .countdown-card.gyouseishoshi {
            border-left: 5px solid #059669;
        }

        .countdown-title {
            font-size: 18px;
            font-weight: 700;
            margin-bottom: 15px;
        }

        .countdown-title.sharoushi { color: #2563eb; }
        .countdown-title.gyouseishoshi { color: #059669; }

        .countdown-display {
            display: flex;
            gap: 15px;
            justify-content: center;
            margin-top: 15px;
        }

        .countdown-item {
            text-align: center;
        }

        .countdown-number {
            font-size: 32px;
            font-weight: 700;
            color: #1f2937;
        }

        .countdown-label {
            font-size: 12px;
            color: #6b7280;
            margin-top: 5px;
        }

        .phase-indicator {
            background: linear-gradient(135deg, #fef3c7 0%, #fde68a 100%);
            border-radius: 8px;
            padding: 12px 20px;
            margin-bottom: 20px;
            text-align: center;
            font-weight: 600;
            color: #92400e;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        .section {
            background: white;
            border-radius: 12px;
            padding: 25px;
            margin-bottom: 20px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }

        .section-title {
            font-size: 20px;
            font-weight: 700;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid #e5e7eb;
        }

        .section-title.sharoushi { color: #2563eb; }
        .section-title.gyouseishoshi { color: #059669; }

        .subject-grid {
            display: grid;
            gap: 12px;
        }

        .subject-item {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 12px 15px;
            background: #f9fafb;
            border-radius: 8px;
            transition: all 0.2s;
        }

        .subject-item:hover {
            background: #f3f4f6;
        }

        .subject-info {
            flex: 1;
        }

        .subject-name {
            font-weight: 600;
            color: #1f2937;
            margin-bottom: 4px;
        }

        .subject-target {
            font-size: 12px;
            color: #6b7280;
        }

        .progress-controls {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .progress-display {
            font-size: 24px;
            font-weight: 700;
            min-width: 50px;
            text-align: center;
        }

        .sharoushi .progress-display { color: #2563eb; }
        .gyouseishoshi .progress-display { color: #059669; }

        .btn {
            width: 36px;
            height: 36px;
            border: none;
            border-radius: 8px;
            font-size: 20px;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .btn-minus {
            background: #fee2e2;
            color: #dc2626;
        }

        .btn-minus:hover {
            background: #fecaca;
        }

        .btn-plus {
            background: #dbeafe;
            color: #2563eb;
        }

        .btn-plus:hover {
            background: #bfdbfe;
        }

        .review-tracker {
            display: grid;
            gap: 15px;
        }

        .review-month {
            background: #f9fafb;
            border-radius: 8px;
            padding: 15px;
        }

        .review-month-title {
            font-weight: 600;
            color: #1f2937;
            margin-bottom: 12px;
        }

        .review-checkboxes {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
        }

        .review-checkbox {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .review-checkbox input[type="checkbox"] {
            width: 20px;
            height: 20px;
            cursor: pointer;
        }

        .review-checkbox label {
            font-size: 14px;
            color: #374151;
            cursor: pointer;
        }

        .roadmap {
            display: grid;
            gap: 10px;
        }

        .roadmap-item {
            display: flex;
            align-items: center;
            gap: 15px;
            padding: 15px;
            background: #f9fafb;
            border-radius: 8px;
            border-left: 4px solid #e5e7eb;
        }

        .roadmap-item.active {
            background: linear-gradient(135deg, #eff6ff 0%, #dbeafe 100%);
            border-left-color: #2563eb;
        }

        .roadmap-month {
            font-weight: 700;
            color: #1f2937;
            min-width: 80px;
        }

        .roadmap-content {
            flex: 1;
            font-size: 14px;
            color: #4b5563;
        }

        .youtube-section {
            margin-top: 30px;
        }

        .youtube-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 15px;
            margin-top: 15px;
        }

        .youtube-card {
            background: white;
            border-radius: 8px;
            padding: 15px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            transition: all 0.2s;
        }

        .youtube-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.15);
        }

        .youtube-card a {
            text-decoration: none;
            color: inherit;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .youtube-icon {
            color: #ff0000;
            font-size: 20px;
        }

        .youtube-info {
            flex: 1;
        }

        .youtube-name {
            font-weight: 600;
            color: #1f2937;
            margin-bottom: 4px;
            font-size: 14px;
        }

        .youtube-desc {
            font-size: 12px;
            color: #6b7280;
        }

        .youtube-category {
            background: linear-gradient(135deg, #eff6ff 0%, #dbeafe 100%);
            border-left: 4px solid #2563eb;
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 20px;
        }

        .youtube-category.gyouseishoshi {
            background: linear-gradient(135deg, #ecfdf5 0%, #d1fae5 100%);
            border-left-color: #059669;
        }

        .youtube-category-title {
            font-size: 18px;
            font-weight: 700;
            margin-bottom: 15px;
        }

        .youtube-category-title.sharoushi { color: #2563eb; }
        .youtube-category-title.gyouseishoshi { color: #059669; }

        .tips-box {
            background: #fef3c7;
            border-left: 4px solid #f59e0b;
            border-radius: 8px;
            padding: 15px 20px;
            margin-top: 20px;
        }

        .tips-title {
            font-weight: 700;
            color: #92400e;
            margin-bottom: 8px;
        }

        .tips-content {
            color: #78350f;
            font-size: 14px;
            line-height: 1.6;
        }

        @media (max-width: 768px) {
            .header {
                padding: 15px 20px;
            }

            .header h1 {
                font-size: 20px;
            }

            .section {
                padding: 20px 15px;
            }

            .countdown-number {
                font-size: 24px;
            }

            .youtube-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- ãƒ˜ãƒƒãƒ€ãƒ¼ -->
        <div class="header">
            <h1>ğŸ“š ãƒ€ãƒ–ãƒ«å—é¨“ã‚¹ã‚¿ãƒ‡ã‚£ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ 2026</h1>
            <div class="sync-status synced" id="syncStatus">
                <div class="status-dot"></div>
                <span id="syncText">åŒæœŸæ¸ˆã¿</span>
            </div>
        </div>

        <!-- ã‚«ã‚¦ãƒ³ãƒˆãƒ€ã‚¦ãƒ³ -->
        <div class="countdown-section">
            <div class="countdown-card sharoushi">
                <div class="countdown-title sharoushi">ç¤¾ä¼šä¿é™ºåŠ´å‹™å£«è©¦é¨“</div>
                <div style="font-size: 14px; color: #6b7280; margin-bottom: 10px;">2026å¹´8æœˆ23æ—¥(æ—¥)</div>
                <div class="countdown-display" id="srCountdown"></div>
            </div>
            <div class="countdown-card gyouseishoshi">
                <div class="countdown-title gyouseishoshi">è¡Œæ”¿æ›¸å£«è©¦é¨“</div>
                <div style="font-size: 14px; color: #6b7280; margin-bottom: 10px;">2026å¹´11æœˆ8æ—¥(æ—¥)</div>
                <div class="countdown-display" id="gsCountdown"></div>
            </div>
        </div>

        <!-- ç¾åœ¨ãƒ•ã‚§ãƒ¼ã‚º -->
        <div class="phase-indicator" id="phaseIndicator"></div>

        <!-- ç¤¾åŠ´å£«ç§‘ç›® -->
        <div class="section sharoushi">
            <div class="section-title sharoushi">ç¤¾ä¼šä¿é™ºåŠ´å‹™å£« ç§‘ç›®é€²æ—</div>
            <div class="subject-grid" id="srSubjects"></div>
        </div>

        <!-- è¡Œæ”¿æ›¸å£«ç§‘ç›® -->
        <div class="section gyouseishoshi">
            <div class="section-title gyouseishoshi">è¡Œæ”¿æ›¸å£« ç§‘ç›®é€²æ—</div>
            <div class="subject-grid" id="gsSubjects"></div>
        </div>

        <!-- æœˆæ¬¡ãƒ¬ãƒ“ãƒ¥ãƒ¼ãƒˆãƒ©ãƒƒã‚«ãƒ¼ -->
        <div class="section">
            <div class="section-title gyouseishoshi">è¡Œæ”¿æ›¸å£« æœˆæ¬¡ãƒ¬ãƒ“ãƒ¥ãƒ¼ãƒˆãƒ©ãƒƒã‚«ãƒ¼</div>
            <div class="review-tracker" id="reviewTracker"></div>
        </div>

        <!-- å­¦ç¿’ãƒ­ãƒ¼ãƒ‰ãƒãƒƒãƒ— -->
        <div class="section">
            <div class="section-title">12ãƒ¶æœˆå­¦ç¿’ãƒ­ãƒ¼ãƒ‰ãƒãƒƒãƒ—</div>
            <div class="roadmap" id="roadmap"></div>
        </div>

        <!-- YouTube ãƒãƒ£ãƒ³ãƒãƒ« -->
        <div class="section youtube-section">
            <div class="section-title">ğŸ“º ãŠã™ã™ã‚YouTubeãƒãƒ£ãƒ³ãƒãƒ«</div>
            
            <div class="youtube-category">
                <div class="youtube-category-title sharoushi">ç¤¾åŠ´å£«è©¦é¨“ äººæ°—ãƒãƒ£ãƒ³ãƒãƒ«</div>
                <div class="youtube-grid">
                    <div class="youtube-card">
                        <a href="https://www.youtube.com/@agaroot_sharoushi" target="_blank">
                            <div class="youtube-icon">â–¶</div>
                            <div class="youtube-info">
                                <div class="youtube-name">ã‚¢ã‚¬ãƒ«ãƒ¼ãƒˆã€ç¤¾åŠ´å£«ã€‘</div>
                                <div class="youtube-desc">èãæµã—ãƒ»æ”»ç•¥æ³•</div>
                            </div>
                        </a>
                    </div>
                    <div class="youtube-card">
                        <a href="https://www.youtube.com/@foresight_sharoushi" target="_blank">
                            <div class="youtube-icon">â–¶</div>
                            <div class="youtube-info">
                                <div class="youtube-name">ãƒ•ã‚©ãƒ¼ã‚µã‚¤ãƒˆ ç¤¾åŠ´å£«</div>
                                <div class="youtube-desc">éå»å•è§£èª¬</div>
                            </div>
                        </a>
                    </div>
                    <div class="youtube-card">
                        <a href="https://www.youtube.com/@sharoushi24" target="_blank">
                            <div class="youtube-icon">â–¶</div>
                            <div class="youtube-info">
                                <div class="youtube-name">è³‡æ ¼ã®å¤§åŸ ç¤¾åŠ´å£«24</div>
                                <div class="youtube-desc">10ç‚¹ã‚¢ãƒƒãƒ—è¬›åº§</div>
                            </div>
                        </a>
                    </div>
                    <div class="youtube-card">
                        <a href="https://www.youtube.com/@LECsharoushi" target="_blank">
                            <div class="youtube-icon">â–¶</div>
                            <div class="youtube-info">
                                <div class="youtube-name">LEC ç¤¾åŠ´å£«</div>
                                <div class="youtube-desc">ç§‘ç›®åˆ¥è¬›ç¾©</div>
                            </div>
                        </a>
                    </div>
                    <div class="youtube-card">
                        <a href="https://www.youtube.com/@takedasan_sharoushi" target="_blank">
                            <div class="youtube-icon">â–¶</div>
                            <div class="youtube-info">
                                <div class="youtube-name">ãŸã‘ã ã•ã‚“ç¤¾åŠ´å£«</div>
                                <div class="youtube-desc">æœ¬è³ªç†è§£</div>
                            </div>
                        </a>
                    </div>
                </div>
            </div>

            <div class="youtube-category gyouseishoshi">
                <div class="youtube-category-title gyouseishoshi">è¡Œæ”¿æ›¸å£«è©¦é¨“ äººæ°—ãƒãƒ£ãƒ³ãƒãƒ«</div>
                <div class="youtube-grid">
                    <div class="youtube-card">
                        <a href="https://www.youtube.com/@yuki_gyosei" target="_blank">
                            <div class="youtube-icon">â–¶</div>
                            <div class="youtube-info">
                                <div class="youtube-name">ã‚†ãƒ¼ãå¤§å­¦ã€è¡Œæ”¿æ›¸å£«ã€‘</div>
                                <div class="youtube-desc">è¡Œæ”¿æ³•ãƒ»æ°‘æ³•</div>
                            </div>
                        </a>
                    </div>
                    <div class="youtube-card">
                        <a href="https://www.youtube.com/@agaroot_gyosei" target="_blank">
                            <div class="youtube-icon">â–¶</div>
                            <div class="youtube-info">
                                <div class="youtube-name">ã‚¢ã‚¬ãƒ«ãƒ¼ãƒˆã€è¡Œæ”¿æ›¸å£«ã€‘</div>
                                <div class="youtube-desc">è±Šæ‘è¬›å¸«</div>
                            </div>
                        </a>
                    </div>
                    <div class="youtube-card">
                        <a href="https://www.youtube.com/@itojuku_gyosei" target="_blank">
                            <div class="youtube-icon">â–¶</div>
                            <div class="youtube-info">
                                <div class="youtube-name">ä¼Šè—¤å¡¾ è¡Œæ”¿æ›¸å£«</div>
                                <div class="youtube-desc">æ°‘æ³•åŸºç¤</div>
                            </div>
                        </a>
                    </div>
                    <div class="youtube-card">
                        <a href="https://www.youtube.com/@shikaku_square" target="_blank">
                            <div class="youtube-icon">â–¶</div>
                            <div class="youtube-info">
                                <div class="youtube-name">è³‡æ ¼ã‚¹ã‚¯ã‚¨ã‚¢(æ£®T)</div>
                                <div class="youtube-desc">å›ºã„æ³•å¾‹ã‚’ã‚„ã‚ã‚‰ã‹ã</div>
                            </div>
                        </a>
                    </div>
                    <div class="youtube-card">
                        <a href="https://www.youtube.com/@gyosei_satou" target="_blank">
                            <div class="youtube-icon">â–¶</div>
                            <div class="youtube-info">
                                <div class="youtube-name">è¡Œæ”¿æ›¸å£« ä½è—¤æµ©ä¸€å…ˆç”Ÿ</div>
                                <div class="youtube-desc">éå»å•åå¾©</div>
                            </div>
                        </a>
                    </div>
                </div>
            </div>

            <div class="tips-box">
                <div class="tips-title">ğŸ’¡ æ´»ç”¨ã®ã‚³ãƒ„</div>
                <div class="tips-content">
                    é€šå‹¤æ™‚é–“ã¯èãæµã—å‹•ç”»ã€ä¼‘æ—¥ã¯è¬›ç¾©å‹•ç”»ã‚’1.5ã€œ2å€é€Ÿã§è¦–è´ã™ã‚‹ã¨åŠ¹ç‡çš„ã§ã™!
                </div>
            </div>
        </div>
    </div>

    <script>
        // ========== è¨­å®š ==========
        // ãƒ‡ãƒ—ãƒ­ã‚¤å¾Œã®Google Apps Script URLã«ç½®ãæ›ãˆã¦ãã ã•ã„
        const API_URL = 'https://script.google.com/macros/s/XXXXX/exec';
        
        // ========== ãƒ‡ãƒ¼ã‚¿å®šç¾© ==========
        const srSubjects = [
            { id: 'sr1', name: 'åŠ´åƒåŸºæº–æ³•', target: 10 },
            { id: 'sr2', name: 'åŠ´åƒå®‰å…¨è¡›ç”Ÿæ³•', target: 8 },
            { id: 'sr3', name: 'åŠ´åƒè€…ç½å®³è£œå„Ÿä¿é™ºæ³•', target: 8 },
            { id: 'sr4', name: 'é›‡ç”¨ä¿é™ºæ³•', target: 8 },
            { id: 'sr5', name: 'åŠ´åƒä¿é™ºå¾´åæ³•', target: 6 },
            { id: 'sr6', name: 'å¥åº·ä¿é™ºæ³•', target: 10 },
            { id: 'sr7', name: 'å›½æ°‘å¹´é‡‘æ³•', target: 10 },
            { id: 'sr8', name: 'åšç”Ÿå¹´é‡‘ä¿é™ºæ³•', target: 10 },
            { id: 'sr9', name: 'åŠ´å‹™ç®¡ç†ãƒ»ä¸€èˆ¬å¸¸è­˜', target: 6 },
            { id: 'sr10', name: 'ç¤¾ä¼šä¿é™ºãƒ»ä¸€èˆ¬å¸¸è­˜', target: 6 }
        ];

        const gsSubjects = [
            { id: 'gs1', name: 'æ†²æ³•', target: 5 },
            { id: 'gs2', name: 'è¡Œæ”¿æ³•ç·è«–', target: 5 },
            { id: 'gs3', name: 'è¡Œæ”¿æ‰‹ç¶šæ³•', target: 5 },
            { id: 'gs4', name: 'è¡Œæ”¿ä¸æœå¯©æŸ»æ³•', target: 5 },
            { id: 'gs5', name: 'è¡Œæ”¿äº‹ä»¶è¨´è¨Ÿæ³•', target: 5 },
            { id: 'gs6', name: 'å›½å®¶è³ å„Ÿæ³•ãƒ»åœ°æ–¹è‡ªæ²»æ³•', target: 5 },
            { id: 'gs7', name: 'æ°‘æ³•', target: 5 },
            { id: 'gs8', name: 'å•†æ³•ãƒ»ä¼šç¤¾æ³•', target: 3 },
            { id: 'gs9', name: 'åŸºç¤æ³•å­¦', target: 2 },
            { id: 'gs10', name: 'ä¸€èˆ¬çŸ¥è­˜', target: 3 }
        ];

        const reviewMonths = [
            { month: '2025-12', label: '12æœˆ', levels: ['L1', 'L2'] },
            { month: '2026-01', label: '1æœˆ', levels: ['L1', 'L2'] },
            { month: '2026-02', label: '2æœˆ', levels: ['L1', 'L2'] },
            { month: '2026-03', label: '3æœˆ', levels: ['L1', 'L2', 'L3'] },
            { month: '2026-04', label: '4æœˆ', levels: ['L1', 'L2'] },
            { month: '2026-05', label: '5æœˆ', levels: ['L1', 'L2'] },
            { month: '2026-06', label: '6æœˆ', levels: ['L1', 'L2', 'L3'] }
        ];

        const roadmapItems = [
            { month: '2025å¹´12æœˆ', content: 'ç¤¾åŠ´å£«: åŠ´åƒæ³•ã®åŸºç¤å›ºã‚ / è¡Œæ”¿æ›¸å£«: æ†²æ³•ãƒ»è¡Œæ”¿æ³•ã®å°å…¥' },
            { month: '2026å¹´1æœˆ', content: 'ç¤¾åŠ´å£«: åŠ´ç½ãƒ»é›‡ç”¨ä¿é™º / è¡Œæ”¿æ›¸å£«: è¡Œæ”¿æ³•3æ³•ã®ç†è§£' },
            { month: '2026å¹´2æœˆ', content: 'ç¤¾åŠ´å£«: å¥åº·ä¿é™ºãƒ»å¹´é‡‘ã®åŸºç¤ / è¡Œæ”¿æ›¸å£«: æ°‘æ³•ç·å‰‡ãƒ»ç‰©æ¨©' },
            { month: '2026å¹´3æœˆ', content: 'ç¤¾åŠ´å£«: å¹´é‡‘åˆ¶åº¦ã®å®Œæˆ / è¡Œæ”¿æ›¸å£«: æ°‘æ³•å‚µæ¨©ãƒ»å®¶æ—æ³•' },
            { month: '2026å¹´4æœˆ', content: 'ç¤¾åŠ´å£«: ä¸€èˆ¬å¸¸è­˜ã®å¼·åŒ– / è¡Œæ”¿æ›¸å£«: å•†æ³•ãƒ»ä¼šç¤¾æ³•' },
            { month: '2026å¹´5æœˆ', content: 'ç¤¾åŠ´å£«: å…¨ç§‘ç›®1å‘¨ç›®å®Œæˆ / è¡Œæ”¿æ›¸å£«: åŸºç¤æ³•å­¦ãƒ»ä¸€èˆ¬çŸ¥è­˜' },
            { month: '2026å¹´6æœˆ', content: 'ç¤¾åŠ´å£«: é‡è¦ç§‘ç›®2å‘¨ç›® / è¡Œæ”¿æ›¸å£«: å…¨ç§‘ç›®1å‘¨ç›®å®Œæˆ' },
            { month: '2026å¹´7æœˆ', content: 'ç¤¾åŠ´å£«: éå»å•æ¼”ç¿’å¼·åŒ– / è¡Œæ”¿æ›¸å£«: é‡è¦ç§‘ç›®ã®åå¾©' },
            { month: '2026å¹´8æœˆ', content: 'ç¤¾åŠ´å£«è©¦é¨“æœ¬ç•ª(8/23) / è¡Œæ”¿æ›¸å£«: è¨˜è¿°å¼å¯¾ç­–é–‹å§‹' },
            { month: '2026å¹´9æœˆ', content: 'è¡Œæ”¿æ›¸å£«é›†ä¸­æœŸ: æŠä¸€ãƒ»è¨˜è¿°ã®æ¼”ç¿’' },
            { month: '2026å¹´10æœˆ', content: 'è¡Œæ”¿æ›¸å£«ç›´å‰æœŸ: æ¨¡è©¦ãƒ»å¼±ç‚¹è£œå¼·' },
            { month: '2026å¹´11æœˆ', content: 'è¡Œæ”¿æ›¸å£«è©¦é¨“æœ¬ç•ª(11/8) / æœ€çµ‚èª¿æ•´' }
        ];

        // ========== çŠ¶æ…‹ç®¡ç† ==========
        let progress = {};
        let reviewLog = {};
        let saveTimeout = null;
        let isOnline = true;

        // ========== åˆæœŸåŒ– ==========
        function init() {
            // åˆæœŸãƒ‡ãƒ¼ã‚¿è¨­å®š
            srSubjects.forEach(s => progress[s.id] = 0);
            gsSubjects.forEach(s => progress[s.id] = 0);
            reviewMonths.forEach(m => {
                m.levels.forEach(l => {
                    reviewLog[`${m.month}-${l}`] = false;
                });
            });

            // LocalStorageã‹ã‚‰èª­è¾¼
            loadFromLocalStorage();

            // UIæç”»
            renderSubjects();
            renderReviewTracker();
            renderRoadmap();
            updateCountdown();
            updatePhase();

            // ã‚¹ãƒ—ãƒ¬ãƒƒãƒ‰ã‚·ãƒ¼ãƒˆã‹ã‚‰èª­è¾¼
            loadFromSpreadsheet();

            // å®šæœŸæ›´æ–°
            setInterval(updateCountdown, 60000);
            setInterval(updatePhase, 3600000);
        }

        // ========== UIæç”» ==========
        function renderSubjects() {
            // ç¤¾åŠ´å£«ç§‘ç›®
            const srContainer = document.getElementById('srSubjects');
            srContainer.innerHTML = srSubjects.map(subject => `
                <div class="subject-item">
                    <div class="subject-info">
                        <div class="subject-name">${subject.name}</div>
                        <div class="subject-target">ç›®æ¨™: ${subject.target}å›</div>
                    </div>
                    <div class="progress-controls">
                        <button class="btn btn-minus" onclick="updateProgress('${subject.id}', -1)">âˆ’</button>
                        <div class="progress-display">${progress[subject.id] || 0}</div>
                        <button class="btn btn-plus" onclick="updateProgress('${subject.id}', 1)">+</button>
                    </div>
                </div>
            `).join('');

            // è¡Œæ”¿æ›¸å£«ç§‘ç›®
            const gsContainer = document.getElementById('gsSubjects');
            gsContainer.innerHTML = gsSubjects.map(subject => `
                <div class="subject-item">
                    <div class="subject-info">
                        <div class="subject-name">${subject.name}</div>
                        <div class="subject-target">ç›®æ¨™: ${subject.target}å›</div>
                    </div>
                    <div class="progress-controls">
                        <button class="btn btn-minus" onclick="updateProgress('${subject.id}', -1)">âˆ’</button>
                        <div class="progress-display">${progress[subject.id] || 0}</div>
                        <button class="btn btn-plus" onclick="updateProgress('${subject.id}', 1)">+</button>
                    </div>
                </div>
            `).join('');
        }

        function renderReviewTracker() {
            const container = document.getElementById('reviewTracker');
            container.innerHTML = reviewMonths.map(month => `
                <div class="review-month">
                    <div class="review-month-title">${month.label}</div>
                    <div class="review-checkboxes">
                        ${month.levels.map(level => {
                            const key = `${month.month}-${level}`;
                            return `
                                <div class="review-checkbox">
                                    <input type="checkbox" id="${key}" 
                                           ${reviewLog[key] ? 'checked' : ''}
                                           onchange="updateReview('${key}', this.checked)">
                                    <label for="${key}">${level}</label>
                                </div>
                            `;
                        }).join('')}
                    </div>
                </div>
            `).join('');
        }

        function renderRoadmap() {
            const container = document.getElementById('roadmap');
            const now = new Date();
            const currentMonth = now.getMonth();
            const currentYear = now.getFullYear();
            
            container.innerHTML = roadmapItems.map((item, index) => {
                const itemDate = new Date(2025, 11 + index, 1); // 2025å¹´12æœˆã‹ã‚‰é–‹å§‹
                const isActive = itemDate.getMonth() === currentMonth && 
                                itemDate.getFullYear() === currentYear;
                
                return `
                    <div class="roadmap-item ${isActive ? 'active' : ''}">
                        <div class="roadmap-month">${item.month}</div>
                        <div class="roadmap-content">${item.content}</div>
                    </div>
                `;
            }).join('');
        }

        function updateCountdown() {
            const now = new Date();
            const srExam = new Date('2026-08-23T00:00:00');
            const gsExam = new Date('2026-11-08T00:00:00');

            displayCountdown('srCountdown', now, srExam);
            displayCountdown('gsCountdown', now, gsExam);
        }

        function displayCountdown(elementId, now, target) {
            const diff = target - now;
            const days = Math.floor(diff / (1000 * 60 * 60 * 24));
            const hours = Math.floor((diff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
            const minutes = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));

            document.getElementById(elementId).innerHTML = `
                <div class="countdown-item">
                    <div class="countdown-number">${days}</div>
                    <div class="countdown-label">æ—¥</div>
                </div>
                <div class="countdown-item">
                    <div class="countdown-number">${hours}</div>
                    <div class="countdown-label">æ™‚é–“</div>
                </div>
                <div class="countdown-item">
                    <div class="countdown-number">${minutes}</div>
                    <div class="countdown-label">åˆ†</div>
                </div>
            `;
        }

        function updatePhase() {
            const now = new Date();
            const srExam = new Date('2026-08-23');
            const gsExam = new Date('2026-11-08');
            
            let phase = '';
            const daysToSr = Math.floor((srExam - now) / (1000 * 60 * 60 * 24));
            const daysToGs = Math.floor((gsExam - now) / (1000 * 60 * 60 * 24));

            if (now < srExam) {
                if (daysToSr > 30) {
                    phase = 'ğŸ“˜ ç¤¾åŠ´å£«é›†ä¸­æœŸ';
                } else {
                    phase = 'ğŸ”¥ ç¤¾åŠ´å£«ç›´å‰æœŸ';
                }
            } else if (now < gsExam) {
                if (daysToGs > 30) {
                    phase = 'ğŸ“— è¡Œæ”¿æ›¸å£«é›†ä¸­æœŸ';
                } else {
                    phase = 'ğŸ”¥ è¡Œæ”¿æ›¸å£«ç›´å‰æœŸ';
                }
            } else {
                phase = 'ğŸ‰ è©¦é¨“çµ‚äº†ï¼ãŠç–²ã‚Œæ§˜ã§ã—ãŸï¼';
            }

            document.getElementById('phaseIndicator').textContent = phase;
        }

        // ========== ãƒ‡ãƒ¼ã‚¿æ›´æ–° ==========
        function updateProgress(subjectId, delta) {
            progress[subjectId] = Math.max(0, (progress[subjectId] || 0) + delta);
            renderSubjects();
            scheduleSave();
        }

        function updateReview(key, checked) {
            reviewLog[key] = checked;
            scheduleSave();
        }

        function scheduleSave() {
            clearTimeout(saveTimeout);
            saveTimeout = setTimeout(() => {
                saveToLocalStorage();
                saveToSpreadsheet();
            }, 1000);
        }

        // ========== LocalStorage ==========
        function saveToLocalStorage() {
            localStorage.setItem('progress', JSON.stringify(progress));
            localStorage.setItem('reviewLog', JSON.stringify(reviewLog));
        }

        function loadFromLocalStorage() {
            const savedProgress = localStorage.getItem('progress');
            const savedReview = localStorage.getItem('reviewLog');
            
            if (savedProgress) progress = JSON.parse(savedProgress);
            if (savedReview) reviewLog = JSON.parse(savedReview);
        }

        // ========== ã‚¹ãƒ—ãƒ¬ãƒƒãƒ‰ã‚·ãƒ¼ãƒˆé€£æº ==========
        async function loadFromSpreadsheet() {
            if (API_URL.includes('XXXXX')) {
                updateSyncStatus('offline', 'ã‚ªãƒ•ãƒ©ã‚¤ãƒ³');
                isOnline = false;
                return;
            }

            try {
                updateSyncStatus('syncing', 'èª­è¾¼ä¸­...');
                
                const response = await fetch(API_URL, {
                    method: 'GET',
                    redirect: 'follow'
                });
                
                const text = await response.text();
                const result = JSON.parse(text);
                
                if (result.success && result.data) {
                    progress = result.data.progress || progress;
                    reviewLog = result.data.reviewLog || reviewLog;
                    
                    renderSubjects();
                    renderReviewTracker();
                    saveToLocalStorage();
                    
                    updateSyncStatus('synced', 'åŒæœŸæ¸ˆã¿');
                    isOnline = true;
                } else {
                    throw new Error(result.error || 'èª­è¾¼ã«å¤±æ•—ã—ã¾ã—ãŸ');
                }
            } catch (error) {
                console.error('èª­è¾¼ã‚¨ãƒ©ãƒ¼:', error);
                updateSyncStatus('offline', 'ã‚ªãƒ•ãƒ©ã‚¤ãƒ³');
                isOnline = false;
            }
        }

        async function saveToSpreadsheet() {
            if (!isOnline || API_URL.includes('XXXXX')) {
                return;
            }

            try {
                updateSyncStatus('syncing', 'ä¿å­˜ä¸­...');
                
                const response = await fetch(API_URL, {
                    method: 'POST',
                    redirect: 'follow',
                    headers: { 'Content-Type': 'text/plain' },
                    body: JSON.stringify({ progress, reviewLog })
                });
                
                const text = await response.text();
                const result = JSON.parse(text);
                
                if (result.success) {
                    updateSyncStatus('synced', 'åŒæœŸæ¸ˆã¿');
                } else {
                    throw new Error(result.error || 'ä¿å­˜ã«å¤±æ•—ã—ã¾ã—ãŸ');
                }
            } catch (error) {
                console.error('ä¿å­˜ã‚¨ãƒ©ãƒ¼:', error);
                updateSyncStatus('error', 'ã‚¨ãƒ©ãƒ¼');
                setTimeout(() => updateSyncStatus('offline', 'ã‚ªãƒ•ãƒ©ã‚¤ãƒ³'), 3000);
            }
        }

        function updateSyncStatus(status, text) {
            const statusEl = document.getElementById('syncStatus');
            const textEl = document.getElementById('syncText');
            
            statusEl.className = `sync-status ${status}`;
            textEl.textContent = text;
        }

        // ========== èµ·å‹• ==========
        init();
    </script>
</body>
</html>
